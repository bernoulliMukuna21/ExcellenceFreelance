extends layout

block content
    - let this_title = 'Kunta Kinte and the 40 Thieves Book Reviews';
    - let currentYear = (new Date()).getFullYear();
    - let startYear = currentYear - 50;
    - let rangeOfYears = [];
    - for(let i=currentYear+6; i>=startYear; i--){ rangeOfYears.push(i)}

    .freelancer-page-main-container
        .freelancer-update-infos
        div.main-account-page
            .freelancer_account_left_side
                .account-profile-details
                    .account-profile-image
                        if !freelancerUser.profile_picture.data
                            .default-profile-image
                                img(src='/images/userDefaultImage.png')
                                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                    p.addProfilePicture + Add Profile Picture
                        else
                            img(src=loggedInUser_imageSrc)
                    p.account-profile-name #{freelancerUser.name + ' ' + freelancerUser.surname}
                    if (isLogged && (emailEncode(freelancerUser.email) !== emailEncode(loggedInUser.email)))
                        div.public-service-enquiry
                            - let freelancerUser_Mssg = emailEncode(freelancerUser.email)
                            button(class='book-btn') Book
                            a(id='freelance-mssg-btn')
                                p Message
                                i.far.fa-envelope
                                input(style='display: none;' id='freelancerToMessage-unique-key' value=freelancerUser_Mssg)

                    div.freelancer-services
                        if freelancerUser.serviceAndPrice.length === 0
                            .freelancer-serviceAndPrice-empty
                                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                    p#addServiceAndPrice + Add Service and Price
                                else
                                    p(style='font-weight: bold') Service and Prices Empty
                        else
                            each servicePrice in freelancerUser.serviceAndPrice
                                .freelancer-serviceAndPrice-profile
                                    h4 #{servicePrice.service}
                                    h4 #{servicePrice.price}

                    div.account-profile-information
                        ul
                            li.user-main-page(class='clicked') Main Page
                            if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                li.user-update-page Update Personal Information
                            li.user-current-booking-page Bookings
                            if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                li.user-completed-booking-page(id=messageIdHTML)
                                    p Messages
                                    p.newMessageReceived(style='display:none;') new

            .freelancer_account_main_side
                .freelancer-main-page
                    .account-first-side
                        h1 About Me
                        if !freelancerUser.description
                            .default-description
                                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                    p#addDescription + Add a Description about yourself
                                else
                                    p(style='font-weight: bold') Description Empty
                        else
                            p #{freelancerUser.description}
                    .account-second-side
                        div.user-account-skills
                            h1 Skills
                            if freelancerUser.skill.length === 0
                                section.default-skill
                                    if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                        p#addSkills + Add Your Skills
                                    else
                                        p(style='font-weight: bold') Skill Empty
                            else
                                section
                                    each freelancerSkill in freelancerUser.skill
                                        p #{freelancerSkill}
                    .account-third-side
                        h1 Education
                        if freelancerUser.education.length === 0
                            section.each-education.default-education
                                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                    p#addEducation + Add Education
                                else
                                    p(style='font-weight: bold') Education Empty
                        else
                            each freelancerEducation in freelancerUser.education
                                section.each-education
                                    p #{freelancerEducation.degreeAndCourse}
                                    p #{freelancerEducation.institute}
                                    p Year:#{' '+ freelancerEducation.educationYear}

                    .account-fourth-side
                        h1 Portfolio
                        div.image-portfolio(style='border: .1rem dashed black; display: flex; justify-content: center; ' +
                        'align-items: center; height: 15vh')
                            if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                                p#addPortfolio + Add to your Portfolio(images, videos or PDFs)
                            else
                                p(style='font-weight: bold') Portfolio Empty

                        div.image-portfolio
                            div
                                .portfolio-tag-overlay
                                    p Some Photo I took
                                img(src='/images/eF1.jpg')
                            div
                                .portfolio-tag-overlay
                                    p My Trip to Ghana
                                img(src='/images/eF2.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Do you see this picture
                                video(src='/images/videoExcellence1.mp4', controls)
                            div
                                .portfolio-tag-overlay
                                    p My time at the University of Sheffield
                                img(src='/images/eF4.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Throw back
                                img(src='/images/eF5.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Hmmm
                                img(src='/images/eF6.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Do you see what I see
                                img(src='/images/eF7.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Christ in me da hope of glory
                                img(src='/images/eF4.jpg')
                            div
                                .portfolio-tag-overlay
                                    p I have found IT!!
                                video(src='/images/excellenceVideo.mp4', controls)
                            div
                                .portfolio-tag-overlay
                                    p Some other thing
                                img(src='/images/eF2.jpg')
                            div
                                .portfolio-tag-overlay
                                    p Some final thing
                                img(src='/images/eF3.jpg')
                    //
                        .account-fifth-side
                            h1 All Reviews
                            div.written-reviews
                                .default-written-review
                                    p No Reviews
                            //
                                section.user-single-review
                                    section.reviewer-identity
                                        img(src='/images/Jojo.jpg' style='width:5rem; height:5rem')
                                        p Debbie Lambanot
                                    section.review-content
                                        section.section-one
                                            p Rating: 3.5/5
                                            p Agree: 1000
                                            p Disagree: 10
                                        section.section-two
                                            p.user-account-reviews Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.
                                        section.section-three
                                            button.dislike
                                                i.far.fa-thumbs-up(aria-hidden='true')
                                            button.like
                                                i.far.fa-thumbs-down(aria-hidden='true')
                            div.user-write-review
                                section.user-review-section
                                    textarea.user-write-review-area(placeholder='Write a Review...')
                                    select.review-rate(name='star-rate')
                                        option(value='star-rating') Enter a Rating
                                        option(value='one') 1
                                        option(value='one-half') 1.5
                                        option(value='two') 2
                                        option(value='two-half') 2.5
                                        option(value='three') 3
                                        option(value='three-half') 3.5
                                        option(value='four') 4
                                        option(value='four-half') 4.5
                                        option(value='five') 5
                                section.review-submit-section
                                    button(id='user-review-submission') Submit Review


                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                    .freelancer-update-page(style='display: none;')
                        - let updateOption = 'pointer-events: auto';
                        - //if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                        - // The line of code right below checks whether the current logged in user is using either Google or Facebook strategy.
                        - // if that is the case, then they are not allowd to update the email and password on this platform.
                        - if(freelancerUser.authentication.authName){updateOption = 'pointer-events: none; background-color: #213e53; color: white; border-color: #213e53; font-weight: bold';}

                        h1 Update Personal Information
                        p Setup your general profile details.

                        form.update-general-information(method='post', autocomplete="off")
                            h3 Name and other General Information
                            .user-general-information-one
                                .general-information-section-one
                                    label(for='name') Name: #[br]
                                    input(id='name', type='text', placeholder='Enter Name', name='name',
                                        value=typeof (freelancerUser.name) != 'undefined' ? freelancerUser.name: '', required)

                                    label(for='email') #[br] Email Address: #[br]
                                    input(id='email', type='email', placeholder='Enter Email', name='email',
                                        value=typeof (freelancerUser.email) != 'undefined' ? freelancerUser.email: '', style=updateOption,
                                        required)
                                .general-information-section-two
                                    label(for='surname') Surname: #[br]
                                    input(id='surname', type='text', placeholder='Enter Surname', name='surname',
                                        value=typeof (freelancerUser.surname) != 'undefined' ? freelancerUser.surname: '', required)

                                    label(for='phone-number') #[br] Phone Number: #[br]
                                    input(id='phone-number', type='tel', placeholder='Enter Phone Number', name='phone_number',
                                        value=typeof (freelancerUser.phone_number) != 'undefined' ? freelancerUser.phone_number: '')
                                    input(type='text', style='display: none;')
                                .general-information-section-three
                                    label Profile Picture
                                    .file-image-area
                                        .file-image-upload
                                            img(id='imagePreview', src=loggedInUser_imageSrc)
                                        .file-image-upload-btn
                                            span
                                                i.fas.fa-cloud-upload-alt
                                                p Upload Image
                                            input#freelancer-profile-picture(type='file',
                                                name='user_profile_picture')

                            .user-general-information-two
                                h3 Change your Password
                                .git-password-update-section
                                    .git-old-password
                                        label(for='old-password') Old Password #[br]
                                        input(id='old-password', type='password', placeholder='Old Password',
                                            name='old_password', style=updateOption, readonly)
                                    .git-new-password
                                        label(for='new-password') New Password #[br]
                                        input(id='new-password', type='password', placeholder='New Password',
                                            name='new_password', style=updateOption,
                                            onfocus = "this.removeAttribute('readonly')", readonly)
                                    .git-new-repeat-password
                                        label(for='new-repeat-password') Confirm New Password #[br]
                                        input(id='new-repeat-password', type='password', placeholder='Repeat New Password',
                                            name='confirm_password', style=updateOption,
                                            onfocus = "this.removeAttribute('readonly')", readonly)

                            .user-general-information-three
                                h3 Education
                                .eduction-container
                                    .user-education
                                        input#Schoolname.form-control(type='text', value='',
                                            placeholder='University or College Name')
                                        input#Major.form-control(type='text', value='',
                                            placeholder='Degree Qualification (e.g. BSc, MSc, ...)')
                                        input#Degree.form-control(type='text', value='',
                                            placeholder='Degree Name (e.g. Business Management)')
                                        .user-education-years
                                            select#educationDateStart.form-control
                                                option(value='') Year
                                                each year in rangeOfYears
                                                    option(value= year) #{year}
                                            select#educationDateEnd.form-control
                                                option(value='') Year
                                                each year in rangeOfYears
                                                    option(value= year) #{year}
                                            button.education-input-btn: i.fas.fa-plus-square
                                    .saved-education
                                        each education in freelancerUser.education
                                            .freelancer-single-education
                                                .show-section
                                                    h4 #{education.degreeAndCourse}
                                                    p #{education.institute}
                                                    p Year #{' '+education.educationYear}
                                                    button.education-delete-btn x
                                                .hide-section(style='display: none;')
                                                    input(type='text', name='degree', value=education.degreeAndCourse,
                                                        readonly=true)
                                                    input(type='text', name='schoolName', value=education.institute,
                                                        readonly=true)
                                                    input(type='text', name='educationYear', value=education.educationYear)
                                            //
                                                .freelancer-single-education
                                                    .show-section
                                                        h4 Master of Science Computer Engineering
                                                        p University of Sheffield
                                                        p Year 2018-2019
                                                        button.education-delete-btn x
                                                    .hide-section(style='display: none;')
                                                        input(type='text', name='degree', value='Master of Science Computer Engineering',
                                                            readonly=true)
                                                        input(type='text', name='schoolName', value='University of Sheffield',
                                                            readonly=true)
                                                        input(type='text', name='educationYear', value='2018-2019')

                                    .user-service_and_price
                                        h3 Service and Price
                                        .user-servicePrice-container
                                            section#userServiceField
                                                label Service #[br]
                                                input(type='text', name='service', id='service', value='',
                                                        placeholder='Enter Services (e.g. Developer, Translator, ...)')

                                            section
                                                label(for='price') Price #[br]
                                                div#userServicesPriceField
                                                    input(type='text', name='price', id='price', value='',
                                                        placeholder='Enter Price (e.g. 8.90, 134)')
                                                    button#servicePriceBttn: i.fas.fa-plus-square
                                        .saved-serviceAndPrice
                                            //
                                                .single-serviceAndPrice
                                                    .show-serviceAndPrice
                                                        h4 Industrial Engineer
                                                        h4 £19.89
                                                        button.delete-aServiceAndPrice-btn x
                                                    .hide-serviceAndPrice(style='display: none')
                                                        input(type='text', name='service', value='Industrial Engineer', readonly=true)
                                                        input(type='text', name='price', value='£19.89', readonly=true)

                                    .user-bio-details
                                        h3 Description and Other Necessary Information
                                        .user-bio-details-container
                                            .user-bio-one
                                                section
                                                    label(for='freelancer_description') Description (Maximum 600 characters) #[br]
                                                    textarea(id='freelancer_description', placeholder='Write your Description (max 600 characters)...',
                                                        name='freelancer_description', maxlength="600")
                                                        | #{typeof (freelancerUser.description) != 'undefined' ? freelancerUser.description : ''}

                                                section
                                                    label Skills #[br]
                                                        .user-bio-container#userBioSkills
                                                            input(type='text', value='',
                                                                placeholder='Enter Skills (e.g. Microsoft Word, Java, ...)')
                                                            button#add-skills-button: i.fas.fa-plus-square
                                                        .saved-skill
                                                            each uniqueSkill in freelancerUser.skill
                                                                .single-skill
                                                                    .show-skill
                                                                        h4 #{uniqueSkill}
                                                                        button.delete-aSkill-btn x
                                                                    .hidden-skill(style='display:none;')
                                                                        input(type='text', name='skills', value=uniqueSkill, readonly=true)
                                                                //
                                                                   .single-skill
                                                                       .show-skill
                                                                           h4 Something Skill
                                                                           button.delete-aSkill-btn x
                                                                       .hidden-skill(style='display:none;')
                                                                           input(type='text', name='skills', value='Something Skill', readonly=true)


                            .update-page-submit
                                    input#update-page-submission(type='submit', value='Save Profile')

                .freelancer-booking-page(style='display: none;')
                    div.freelancer-projects-current
                        h1 Next Due Project
                        .freelancer-current-project-container
                            .freelancer-projects-header
                                p Project Name
                                p Client Name
                                p Due Date
                                p Messages
                                p Status
                                p Options
                            .freelancer-projects-top
                                p #{this_title.substring(0, 35)}...
                                p Armando Kimuka
                                p June 12, 2020
                                .freelancer-messages
                                    p 10
                                    i.fas.fa-comment-dots
                                p.project-status ongoing
                                .freelancer-options
                                    i.far.fa-trash-alt
                                    i.far.fa-edit
                    div.freelancer-all-projects
                        .freelancer-one-project
                            p Les Corbeaux et Les Renards
                            p Kokumbo l'ecrivain
                            p June 12, 2023
                            .freelancer-messages
                                p 100
                                i.fas.fa-comment-dots
                            p.project-status yet to begin
                            .freelancer-options
                                i.far.fa-trash-alt
                                i.far.fa-edit
                    div.freelancer-all-projects
                        .freelancer-one-project
                            p Les Corbeaux et Les Renards
                            p Kokumbo l'ecrivain
                            p June 12, 2023
                            .freelancer-messages
                                p 100
                                i.fas.fa-comment-dots
                            p.project-status yet to begin
                            .freelancer-options
                                i.far.fa-trash-alt
                                i.far.fa-edit
                    div.freelancer-all-projects
                        .freelancer-one-project
                            p Les Corbeaux et Les Renards
                            p Kokumbo l'ecrivain
                            p June 12, 2023
                            .freelancer-messages
                                p 100
                                i.fas.fa-comment-dots
                            p.project-status yet to begin
                            .freelancer-options
                                i.far.fa-trash-alt
                                i.far.fa-edit

                if (isLogged && (emailEncode(freelancerUser.email) === emailEncode(loggedInUser.email)))
                    .freelancer-message-page(style='display: none;')
                        include ./partials/message

    include ./partials/booking_form